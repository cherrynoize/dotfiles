#!/usr/bin/python
# coding=UTF-8
# These glyphs, and the mapping of file extensions to glyphs
# has been copied from the vimscript code that is present in
# https://github.com/ryanoasis/vim-devicons

import re
import os

# Get the XDG_USER_DIRS directory names from environment variables
xdgs_dirs = {
    os.path.basename(os.getenv(key).rstrip('/')): icon
    for key, icon in (
        ('XDG_DOCUMENTS_DIR', 'ï'),
        ('XDG_DOWNLOAD_DIR', 'ï’˜'),
        ('XDG_CONFIG_DIR', 'îœ‡'),
        ('XDG_MUSIC_DIR', 'ï€¥'),
        ('XDG_PICTURES_DIR', 'î‰„'),
        ('XDG_PUBLICSHARE_DIR', 'ï«'),
        ('XDG_TEMPLATES_DIR', 'ïƒ…'),
        ('XDG_VIDEOS_DIR', 'ï‘‡'),
    )
    if os.getenv(key)
}


# all those glyphs will show as weird squares if you don't have the correct patched font
# My advice is to use NerdFonts which can be found here:
# https://github.com/ryanoasis/nerd-fonts
file_node_extensions = {
    '7z'       : 'ï†‡',
    'a'        : 'î˜¤',
    'ai'       : 'î´',
    'apk'      : 'ï†‡',
    'asm'      : 'î˜”',
    'asp'      : 'î•',
    'aup'      : 'ï€',
    'avi'      : 'ï€ˆ',
    'awk'      : 'î•',
    'bash'     : 'î•',
    'bat'      : 'î˜•',
    'bmp'      : 'î˜',
    'bz2'      : 'ï†‡',
    'c'        : 'î˜',
    'c++'      : 'î˜',
    'cab'      : 'ï†‡',
    'cbr'      : 'ïµ',
    'cbz'      : 'ïµ',
    'cc'       : 'î˜',
    'class'    : 'îœ¸',
    'clj'      : 'î¨',
    'cljc'     : 'î¨',
    'cljs'     : 'îª',
    'cmake'    : 'î˜¤',
    'coffee'   : 'î˜›',
    'conf'     : 'î˜•',
    'cp'       : 'î˜',
    'cpio'     : 'ï†‡',
    'cpp'      : 'î˜',
    'cs'       : 'ï š',
    'csh'      : 'î•',
    'css'      : 'î˜”',
    'cue'      : 'ï€',
    'cvs'      : 'î˜•',
    'cxx'      : 'î˜',
    'd'        : 'î¯',
    'dart'     : 'î˜',
    'db'       : 'îœ†',
    'deb'      : 'ï†‡',
    'diff'     : 'îœ¨',
    'dll'      : 'îœ',
    'doc'      : 'ï€­',
    'docx'     : 'ï€­',
    'dump'     : 'îœ†',
    'edn'      : 'îª',
    'eex'      : 'î˜­',
    'efi'      : 'î•',
    'ejs'      : 'î˜',
    'elf'      : 'î•',
    'elm'      : 'î˜¬',
    'epub'     : 'ï€­',
    'erl'      : 'î±',
    'ex'       : 'î˜­',
    'exe'      : 'îœ',
    'exs'      : 'î˜­',
    'f#'       : 'î§',
    'fifo'     : 'ï³£',
    'fish'     : 'î•',
    'flac'     : 'ï€',
    'flv'      : 'ï€ˆ',
    'fs'       : 'î§',
    'fsi'      : 'î§',
    'fsscript' : 'î§',
    'fsx'      : 'î§',
    'gem'      : 'ï†‡',
    'gemspec'  : 'î‘',
    'gif'      : 'î˜',
    'go'       : 'î˜§',
    'gz'       : 'ï†‡',
    'gzip'     : 'ï†‡',
    'h'        : 'î˜',
    'haml'     : 'î˜',
    'hbs'      : 'î˜',
    'hh'       : 'ïƒ½',
    'hpp'      : 'î˜',
    'hrl'      : 'î±',
    'hs'       : 'î˜Ÿ',
    'htaccess' : 'î˜•',
    'htm'      : 'î˜',
    'html'     : 'î˜',
    'htpasswd' : 'î˜•',
    'hxx'      : 'ïƒ½',
    'ico'      : 'î˜',
    'img'      : 'îœ†',
    'ini'      : 'î˜•',
    'iso'      : 'îœ†',
    'jar'      : 'îœ¸',
    'java'     : 'îœ¸',
    'jl'       : 'î˜¤',
    'jpeg'     : 'î˜',
    'jpg'      : 'î˜',
    'js'       : 'î˜Œ',
    'json'     : 'î˜‹',
    'jsx'      : 'îº',
    'key'      : 'î˜Š',
    'ksh'      : 'î•',
    'leex'     : 'î˜­',
    'less'     : 'î˜”',
    'lha'      : 'ï†‡',
    'lhs'      : 'î˜Ÿ',
    'log'      : 'ï‡ª',
    'lua'      : 'î˜ ',
    'lzh'      : 'ï†‡',
    'lzma'     : 'ï†‡',
    'm4a'      : 'ï€',
    'm4v'      : 'ï€ˆ',
    'markdown' : 'î˜‰',
    'md'       : 'î˜‰',
    'mdx'      : 'î˜‰',
    'mjs'      : 'î˜Œ',
    'mkv'      : 'ï€ˆ',
    'ml'       : 'Î»',
    'mli'      : 'Î»',
    'mov'      : 'ï€ˆ',
    'mp3'      : 'ï€',
    'mp4'      : 'ï€ˆ',
    'mpeg'     : 'ï€ˆ',
    'mpg'      : 'ï€ˆ',
    'msi'      : 'îœ',
    'mustache' : 'î˜',
    'nix'      : 'ïŒ“',
    'o'        : 'î˜¤',
    'ogg'      : 'ï€',
    'part'     : 'î„',
    'pdf'      : 'ïœ¤',
    'php'      : 'î˜ˆ',
    'pl'       : 'î©',
    'pm'       : 'î©',
    'png'      : 'î˜',
    'pp'       : 'ï’™',
    'ppt'      : 'ïœ¦',
    'pptx'     : 'ïœ¦',
    'ps1'      : 'î•',
    'psb'      : 'î¸',
    'psd'      : 'î¸',
    'pub'      : 'î˜Š',
    'py'       : 'î˜†',
    'pyc'      : 'î˜†',
    'pyd'      : 'î˜†',
    'pyo'      : 'î˜†',
    'r'        : 'ï³’',
    'rake'     : 'î‘',
    'rar'      : 'ï†‡',
    'rb'       : 'î‘',
    'rc'       : 'î˜•',
    'rlib'     : 'î¨',
    'rmd'      : 'î˜‰',
    'rom'      : 'î•',
    'rpm'      : 'ï†‡',
    'rproj'    : 'ï«…',
    'rs'       : 'î¨',
    'rss'      : 'î˜™',
    'rtf'      : 'ï€­',
    's'        : 'î˜”',
    'sass'     : 'î˜ƒ',
    'scala'    : 'îœ·',
    'scss'     : 'î˜ƒ',
    'sh'       : 'î•',
    'slim'     : 'î˜',
    'sln'      : 'îœŒ',
    'so'       : 'î˜¤',
    'sql'      : 'îœ†',
    'styl'     : 'î˜€',
    'suo'      : 'îœŒ',
    'swift'    : 'î•',
    't'        : 'î©',
    'tar'      : 'ï†‡',
    'tex'      : 'ï­¨',
    'tgz'      : 'ï†‡',
    'toml'     : 'î˜•',
    'torrent'  : 'î±',
    'ts'       : 'î˜¨',
    'tsx'      : 'îº',
    'twig'     : 'î˜œ',
    'vim'      : 'îŸ…',
    'vimrc'    : 'îŸ…',
    'vue'      : 'ïµ‚',
    'wav'      : 'ï€',
    'webm'     : 'ï€ˆ',
    'webmanifest' : 'î˜‹',
    'webp'     : 'î˜',
    'xbps'     : 'ï†‡',
    'xcplayground' : 'î•',
    'xhtml'    : 'î˜',
    'xls'      : 'ïœš',
    'xlsx'     : 'ïœš',
    'xml'      : 'î˜',
    'xul'      : 'î…',
    'xz'       : 'ï†‡',
    'yaml'     : 'î˜•',
    'yml'      : 'î˜•',
    'zip'      : 'ï†‡',
    'zsh'      : 'î•',
}

dir_node_exact_matches = {
    'noize'                            : 'ğŸ–¤',
    'lucy'                             : 'â™¡',
    '.git'                             : 'î—»',
    '.vim'                             : 'î˜«',
    'nvim'                             : 'î˜«',
#   '.mozilla'                         : 'ğŸ¦Š',
#   'firefox'                          : 'ğŸ¦Š',
    '.mozilla'                         : 'ğŸŒ',
    'firefox'                          : 'ğŸŒ',
    'google-chrome'                    : 'ğŸŒ',
    'brave'                            : 'ğŸŒ',
    'midori'                           : 'ğŸŒ',
    'Min'                              : 'ğŸŒ',
    'network'                          : 'ğŸŒ',
    'hosts'                            : 'ğŸŒ',
    'discord'                          : 'ğŸ—¨',
    '.irssi'                           : 'ğŸ—¨',
    '.thunderbird'                     : 'âœ‰',
    '.mutt'                            : 'âœ‰',
    'kmail'                            : 'âœ‰',
#   'evolution'                        : 'âœ‰', # could be ambiguous
    'mail'                             : 'âœ‰',
    '.config'                          : 'î˜•',
    'dotfiles'                         : 'â—‹',
    'Computer'                         : 'ğŸ–¥',
    'computer'                         : 'ğŸ–¥',
    'disk'                             : 'ğŸ–¥',
    'device'                           : 'ğŸ–¥',
    'partition'                        : 'ğŸ–¥',
    'System'                           : 'ğŸ–¥',
    'System32'                         : 'ğŸ–¥',
    'system'                           : 'ğŸ–¥',
    'System Volume Information'        : 'ğŸ–¥',
    'Desktop'                          : 'ğŸ’»',
    'desktop'                          : 'ğŸ’»',
    'Documents'                        : 'ğŸ—',
    'documents'                        : 'ğŸ—',
    'Downloads'                        : 'ï’˜',
    'downloads'                        : 'ï’˜',
    'Pictures'                         : 'î‰„',
    'pictures'                         : 'î‰„',
    'Images'                           : 'î‰„',
    'images'                           : 'î‰„',
    'pics'                             : 'î‰„',
    'Videos'                           : 'ï‘‡',
    'videos'                           : 'ï‘‡',
    'Music'                            : 'ï€¥',
    'music'                            : 'ï€¥',
    'movies'                           : 'ğŸ–­',
    'shows'                            : 'ï…ª',
    'anime'                            : 'ï…ª',
    'books'                            : 'ï',
    'Games'                            : 'ğŸ®',
    'games'                            : 'ğŸ®',
    'videogames'                       : 'ğŸ®',
    'rocknroll'                        : 'ó°ˆ',
    'lyrics'                           : 'ó°²ƒ',
    'screenplays'                      : 'ó°²ƒ',
    'concepts'                         : 'ó°²ƒ',
    'hacking'                          : 'ğŸ’»',
    'art'                              : 'ğŸ–¼',
    'aiart'                            : 'ğŸ–¼',
    'ai'                               : 'î´',
    'Public'                           : 'ï«',
    'public'                           : 'ï«',
    'Templates'                        : 'ïƒ…',
    'templates'                        : 'ïƒ…',
    'duplicate'                        : 'ïƒ…',
    'clone'                            : 'ïƒ…',
    'copy'                             : 'ïƒ…',
    'archive'                          : 'ğŸ“',
    'binder'                           : 'ğŸ“',
    '.binder'                          : 'ğŸ“',
    'pinned'                           : 'ğŸ“',
    'pin'                              : 'ğŸ“',
    'dropbox'                          : 'îœ‡',
    'python'                           : 'î˜†',
    'go'                               : 'î˜§',
    'workspace'                        : 'ï‚±',
    'cloud'                            : 'ïƒ­',
    'src'                              : 'î•',
    'dev'                              : 'î•',
    'development'                      : 'î•',
    'programming'                      : 'î•',
    'code'                             : 'î•',
    'coding'                           : 'î•',
    'server'                           : 'ğŸŒ',
    'web'                              : 'ğŸŒ',
    'www'                              : 'ğŸŒ',
    'data'                             : 'ğŸ—',
    'bin'                              : 'î•',
    'sbin'                             : 'î•',
    'apps'                             : 'î•',
    'programs'                         : 'î•',
    'software'                         : 'î•',
    'build'                            : 'î•',
    'debug'                            : 'î•',
    'os'                               : 'ï„ˆ',
    'oses'                             : 'ï„ˆ',
    'vms'                              : 'ï„ˆ',
    'blockchain'                       : 'ğŸ”—',
    'solana'                           : 'â—',
    'ethereum'                         : 'â§«',
    'bitcoin'                          : 'â‚¿',
    'backup'                           : 'âŸ³',
    'trash'                            : 'ğŸ—‘',
    '.trash'                           : 'ğŸ—‘',
    'garbage'                          : 'ğŸ—‘',
    '.garbage'                         : 'ğŸ—‘',
    'recycle'                          : 'â™²',
    'recycle_bin'                      : 'â™²',
    'RECYCLEBIN'                       : 'â™²',
    '$RECYCLE.BIN'                     : 'â™²',
}

# Python 2.x-3.4 don't support unpacking syntex `{**dict}`
# XDG_USER_DIRS
dir_node_exact_matches.update(xdgs_dirs)

file_node_exact_matches = {
    '.bash_aliases'                    : 'î˜•',
    '.bash_history'                    : 'î˜•',
    '.bash_logout'                     : 'î˜•',
    '.bash_profile'                    : 'î˜•',
    '.bashprofile'                     : 'î˜•',
    '.bashrc'                          : 'î˜•',
    '.dmrc'                            : 'î˜•',
    '.DS_Store'                        : 'î˜•',
    '.fasd'                            : 'î˜•',
    '.fehbg'                           : 'î‰„',
    '.gitattributes'                   : 'î˜•',
    '.gitconfig'                       : 'î˜•',
    '.gitignore'                       : 'î˜•',
    '.gitlab-ci.yml'                   : 'ïŠ–',
    '.gvimrc'                          : 'î˜«',
    '.nvimrc'                          : 'î˜«',
    '.inputrc'                         : 'î˜•',
    '.jack-settings'                   : 'î˜•',
    '.mime.types'                      : 'î˜•',
    '.ncmpcpp'                         : 'ï€',
    'spotify'                          : 'ï€',
    '.nvidia-settings-rc'              : 'î˜•',
    '.pam_environment'                 : 'î˜•',
    '.profile'                         : 'î˜•',
    '.xprofile'                        : 'î˜•',
    '.recently-used'                   : 'î˜•',
    '.selected_editor'                 : 'î˜•',
    '.vim'                             : 'îŸ…',
    '.nvimrc'                          : 'î˜«',
    '.viminfo'                         : 'î˜«',
    '.vimrc'                           : 'î˜«',
    '.Xauthority'                      : 'î˜•',
    '.Xdefaults'                       : 'î˜•',
    '.xinitrc'                         : 'î˜•',
    '.xinputrc'                        : 'î˜•',
    '.Xresources'                      : 'î˜•',
    '.zshrc'                           : 'î˜•',
    '.zshenv'                          : 'î˜•',
    '_gvimrc'                          : 'î˜«',
    '_vimrc'                           : 'î˜«',
    'out'                              : 'î•',
    'a.out'                            : 'î•',
    'authorized_keys'                  : 'î˜Š',
    'bspwmrc'                          : 'ï„ˆ',
    'awesome'                          : 'ï„ˆ',
    'i3'                               : 'ï„ˆ',
    'cmakelists.txt'                   : 'î˜•',
    'config'                           : 'î˜•',
    'config.ac'                        : 'î˜¤',
    'config.m4'                        : 'î˜¤',
    'config.mk'                        : 'î˜¤',
    'config.ru'                        : 'î‘',
    'configure'                        : 'î•',
    'docker-compose.yml'               : 'ïŒˆ',
    'dockerfile'                       : 'ïŒˆ',
    'Dockerfile'                       : 'ïŒˆ',
    'dropbox'                          : 'îœ‡',
    'exact-match-case-sensitive-1.txt' : 'X1',
    'exact-match-case-sensitive-2'     : 'X2',
    'favicon.ico'                      : 'î˜£',
    'gemfile'                          : 'î‘',
    'gruntfile.coffee'                 : 'î˜‘',
    'gruntfile.js'                     : 'î˜‘',
    'gruntfile.ls'                     : 'î˜‘',
    'gulpfile.coffee'                  : 'î˜',
    'gulpfile.js'                      : 'î˜',
    'gulpfile.ls'                      : 'î˜',
    'ini'                              : 'î˜•',
    'known_hosts'                      : 'î˜Š',
    'ledger'                           : 'ï…•',
    'devnet.json'                      : 'ï…•',
    'mainnet.json'                     : 'ï…•',
    'license'                          : 'î˜Š',
    'LICENSE'                          : 'î˜Š',
    'LICENSE.md'                       : 'î˜Š',
    'LICENSE.txt'                      : 'î˜Š',
    'passwd'                           : 'î˜Š',
    'shadow'                           : 'î˜Š',
    'Makefile'                         : 'î˜•',
    'makefile'                         : 'î˜•',
    'Makefile.ac'                      : 'î˜•',
    'Makefile.in'                      : 'î˜•',
    'mimeapps.list'                    : 'î˜•',
    'mix.lock'                         : 'î˜­',
    'node_modules'                     : 'îœ˜',
    'package-lock.json'                : 'îœ˜',
    'package.json'                     : 'îœ˜',
    'playlists'                        : 'ï€',
    'procfile'                         : 'î˜‡',
    'Rakefile'                         : 'î‘',
    'rakefile'                         : 'î‘',
    'react.jsx'                        : 'î˜¥',
    'README'                           : 'î˜‰',
    'README.markdown'                  : 'î˜‰',
    'README.md'                        : 'î˜‰',
    'README.rst'                       : 'î˜‰',
    'README.txt'                       : 'î˜‰',
    'sxhkdrc'                          : 'î˜•',
    'user-dirs.dirs'                   : 'î˜•',
    'webpack.config.js'                : 'îœ˜',
    '.trash'                           : 'ğŸ—‘',
    '.garbage'                         : 'ğŸ—‘',
}


def devicon(file):
    if file.is_directory:
        return dir_node_exact_matches.get(file.relative_path, 'î—¿')
    return file_node_exact_matches.get(os.path.basename(file.relative_path),
                                       file_node_extensions.get(file.extension, 'î˜’'))
